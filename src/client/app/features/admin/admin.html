<div class="content">
    <div class="container">
        <div class="row">
            <div class="portlet" ng-if='vm.isAddEdit'>
                <div class="portlet-title">
                    <div class="caption">
                        <i class="glyphicon glyphicon-calendar"></i>
                        <span class="caption-subject text-uppercase">{{vm.isEdit? 'Edit Account': 'New Account'}}</span>
                    </div>
                </div>
                <div class="portlet-body">
                    <form class="form-horizontal" name="myForm">
                        <div class="form-group">
                            <label class="control-label col-sm-2">User Name:</label>
                            <div class="col-sm-4" ng-class="{ 'has-error' : myForm.userName.$invalid && !myForm.userName.$pristine }">
                                <input type="text" name="userName" class="form-control" maxlength="64" title="Fill in name" data-ng-model="vm.account.userName"
                                    required>
                                    <p ng-show="myForm.userName.$invalid && !myForm.userName.$pristine" class="help-block">Please Enter User Name</p>
                            </div>
                            <label class="control-label col-sm-2">Account Number:</label>
                            <div class="col-sm-4" ng-class="{ 'has-error' : myForm.accountNumber.$invalid && !myForm.accountNumber.$pristine }">
                                <input type="text" minlength="20" maxlength="20" name=accountNumber pattern="\d{20}" class="form-control" data-ng-model="vm.account.accountNumber"
                                    required>
                                    <p ng-show="myForm.accountNumber.$invalid && !myForm.accountNumber.$pristine" class="help-block">Please Enter 20 digit Account Number</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">Card Number:</label>
                            <div class="col-sm-4" ng-class="{ 'has-error' : myForm.cardNumber.$invalid && !myForm.cardNumber.$pristine }">
                                <input type="text" minlength="16" maxlength="16" name="cardNumber" pattern="\d{16}" class="form-control" data-ng-model="vm.account.cardNumber"
                                    required>
                                    <p ng-show="myForm.cardNumber.$invalid && !myForm.cardNumber.$pristine" class="help-block">Please Enter 16 digit Card Number</p>
                            </div>
                            <label class="control-label col-sm-2">Balance:</label>
                            <div class="col-sm-4" ng-class="{ 'has-error' : myForm.currentBalance.$invalid && !myForm.currentBalance.$pristine }">
                                <input type="text" pattern="\d*" name="currentBalance" minlength="0" class="form-control" data-ng-model="vm.account.currentBalance"
                                    required>
                                    <p ng-show="myForm.currentBalance.$invalid && !myForm.currentBalance.$pristine" class="help-block">Please Enter Balance Amount</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">Expiry Date:</label>
                            <div class="col-sm-4" ng-class="{ 'has-error' : myForm.expirationDate.$invalid && !myForm.expirationDate.$pristine }">
                                <input type="text" class="form-control" name="expirationDate" pattern="\d{1,2}/\d{4}" placeholder="MM/YYYY" data-ng-model="vm.account.expirationDate"
                                    required>
                                    <p ng-show="myForm.expirationDate.$invalid && !myForm.expirationDate.$pristine" class="help-block">Please Enter Date in MM/YYYY Format</p>
                            </div>
                            <label class="control-label col-sm-2">PinCode:</label>
                            <div class="col-sm-4" ng-class="{ 'has-error' : myForm.pinCode.$invalid && !myForm.pinCode.$pristine }">
                                <input type="text" class="form-control" name="pinCode" pattern="\d{4}" minlength="4" maxlength="4" data-ng-model="vm.account.pinCode"
                                    required>
                                    <p ng-show="myForm.pinCode.$invalid && !myForm.pinCode.$pristine" class="help-block">Please Enter 4 Digit Pin Code</p>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <button type="button" ng-click="vm.onSave()" ng-disabled="myForm.$invalid" class="btn btn-primary">Save</button>
                                <button type="button" ng-click="vm.onCancel()" class="btn btn-warning">Cancel</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <br/>
        <div class="row">
            <div class="portlet">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="glyphicon glyphicon-calendar"></i>
                        <span class="caption-subject text-uppercase"> Accounts List</span>
                    </div>
                    <div class="actions">
                        <a class="btn" ng-click="vm.onAddClick()">
                            <i class="glyphicon glyphicon-plus"></i> Add New Account
                        </a>
                    </div>
                </div>
                <div class="portlet-body">
                    <div class="table-responsive">
                        <table class="table  table-bordered">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>User Name</th>
                                    <th>Card Number</th>
                                    <th>Account Number</th>
                                    <th>Balance</th>
                                    <th>Expiry Date</th>
                                    <th>Pincode</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="account in vm.accountList track by $index">
                                    <td>{{$index+1}}</td>
                                    <td>{{account.userName}}</td>
                                    <td>{{account.cardNumber}}</td>
                                    <td>{{account.accountNumber}}</td>
                                    <td>$ {{account.currentBalance}}</td>
                                    <td>{{account.expirationDate}}</td>
                                    <td>{{account.pinCode}}</td>
                                    <td>
                                        <button class="btn btn-default btn-sm" data-ng-click='vm.onEdit(account)' title="Edit">
                                            <span class="glyphicon glyphicon-pencil"></span>
                                        </button>
                                        <button type="button" data-ng-click='vm.onDelete(account)' class="btn btn-default btn-sm" title="Delete">
                                            <span class="glyphicon glyphicon-trash"></span>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>